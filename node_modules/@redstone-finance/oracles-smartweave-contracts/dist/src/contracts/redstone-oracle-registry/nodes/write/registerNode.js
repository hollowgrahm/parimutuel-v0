"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.registerNode = void 0;
const registerNode = (state, action) => {
    const data = action.input.data;
    const caller = action.caller;
    const isValidData = data.name &&
        data.logo &&
        data.description &&
        data.dataServiceId &&
        data.evmAddress &&
        data.ipAddress &&
        data.ecdsaPublicKey &&
        data.arweavePublicKey;
    if (!isValidData) {
        throw new ContractError("Invalid node data");
    }
    if (state.nodes[caller]) {
        throw new ContractError(`Node with owner ${caller} already exists`);
    }
    if (!state.dataServices[data.dataServiceId]) {
        throw new ContractError(`Data feed with id ${data.dataServiceId} does not exist`);
    }
    state.nodes[caller] = data;
    return { state };
};
exports.registerNode = registerNode;
//# sourceMappingURL=registerNode.js.map